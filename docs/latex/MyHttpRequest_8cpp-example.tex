\hypertarget{MyHttpRequest_8cpp-example}{}\section{My\+Http\+Request.\+cpp}
Http request container\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classHttp_1_1Message}{Http\+::\+Message}}, \mbox{\hyperlink{classHttp_1_1Response}{Http\+::\+Response}}
\end{DoxySeeAlso}
My\+Http\+Request.\+hpp \+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{\textcolor{comment}{// Created by nhyarlathotep on 31/01/19.}}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "Request.hpp"}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }MyHttpRequest : \textcolor{keyword}{public} \mbox{\hyperlink{classHttp_1_1Request}{Http::Request}} \{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    HttpHeader \&\mbox{\hyperlink{classHttp_1_1Message_a48162fd73c27101d23db203f5d6cac42}{getHeader}}()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classHttp_1_1Message_aac494cd412c7f7a862bf77b34910249f}{\_header}}; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} \mbox{\hyperlink{classHttp_1_1Message_a1bd3ac73847b9ac567271acebe9372b7}{setBody}}(\textcolor{keyword}{const} std::string \&newBody)\textcolor{keyword}{ override }\{ \_body = newBody; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classHttp_1_1Message_a6399d1873434c29f9d0c44945211a21c}{getBody}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classHttp_1_1Message_a1d40a1145a48d37d6b1a70db5931ac27}{\_body}}; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} \mbox{\hyperlink{classHttp_1_1Message_ae60d01f46493bd2cb3302a26870c7cd4}{setHttpVersion}}(uint8\_t major, uint8\_t minor)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{        \_versionMajor = major;}
\DoxyCodeLine{        \_versionMinor = minor;}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    std::string \mbox{\hyperlink{classHttp_1_1Message_aa0b031cb3fdab637c26a391efcb0f81e}{getHttpVersion}}()\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{        \textcolor{keywordflow}{return} \textcolor{stringliteral}{"HTTP/"} + std::to\_string(\_versionMajor) + \textcolor{stringliteral}{"."} + std::to\_string(\_versionMinor);}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} \mbox{\hyperlink{classHttp_1_1Request_a45955974223ac5126b9ffb88617ec527}{setUri}}(\textcolor{keyword}{const} std::string \&newUri)\textcolor{keyword}{ override }\{ \_uri = newUri; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classHttp_1_1Request_a383bbdb1435da689b7e1c9bc8852f956}{getUri}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classHttp_1_1Request_a3e62c38f894bb8e39ad03ac78531f556}{\_uri}}; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordtype}{void} \mbox{\hyperlink{classHttp_1_1Request_a370711bf60f8eb16be6daf565f4eb987}{setMethod}}(MethodType newMethod)\textcolor{keyword}{ override }\{ \_method = newMethod; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    MethodType \mbox{\hyperlink{classHttp_1_1Request_a865c48e3203e60efbb2c814df96a0fbc}{getMethod}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classHttp_1_1Request_af625e2d310f771616d078a7f173097a5}{\_method}}; \}}
\DoxyCodeLine{\};}
\end{DoxyCodeInclude}
 My\+Field\+Value.\+hpp \+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{\textcolor{comment}{// Created by nhyarlathotep on 31/01/19.}}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "FieldValue.hpp"}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }MyValue : \textcolor{keyword}{public} \mbox{\hyperlink{classZiApi_1_1FieldValue}{ZiApi::FieldValue}} \{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{    \textcolor{keyword}{explicit} MyValue(\textcolor{keywordtype}{int} value) \{ \_value = value; \};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{explicit} MyValue(\textcolor{keywordtype}{double} value) \{ \_value = value; \};}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{explicit} MyValue(\textcolor{keyword}{const} std::string \&value) \{ \_value = value; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{explicit} MyValue(ValueList \&\&value) \{ \_value = value; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{const} ValueVariant \&\mbox{\hyperlink{classZiApi_1_1FieldValue_abfc23c5c8eca45110475c291ce4fcd6a}{getValue}}() \textcolor{keyword}{const} noexcept \textcolor{keyword}{override} \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classZiApi_1_1FieldValue_a597ab052783a2fe3e6cb87a8a6276f38}{\_value}}; \}}
\DoxyCodeLine{}
\DoxyCodeLine{    FieldValue \&\mbox{\hyperlink{classZiApi_1_1FieldValue_ae8b2b66a78907d11d5745af783561efa}{operator=}}(\textcolor{keyword}{const} ValueVariant \&valueVariant)\textcolor{keyword}{ override }\{}
\DoxyCodeLine{        \_value = valueVariant;}
\DoxyCodeLine{        \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\};}
\end{DoxyCodeInclude}
 Output \+: 
\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{Accept : [ text/html application/xhtml+xml application/xml ]}
\DoxyCodeLine{Connection : keep-alive}
\DoxyCodeLine{Host : 127.0.0.1:4242}
\end{DoxyCodeInclude}
 My\+Http\+Request.\+cpp \+:


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{\textcolor{comment}{// Created by nhyarlathotep on 31/01/19.}}
\DoxyCodeLine{\textcolor{comment}{//}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "MyFieldValue.hpp"}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "MyHttpRequest.hpp"}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main() \{}
\DoxyCodeLine{    MyHttpRequest request;}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keyword}{auto} \&header = request.getHeader();                                     \textcolor{comment}{//Get the request's header}}
\DoxyCodeLine{}
\DoxyCodeLine{    header[\textcolor{stringliteral}{"Host"}] = std::make\_shared<MyValue>(\textcolor{stringliteral}{"127.0.0.1:4242"});}
\DoxyCodeLine{    header.emplace(std::make\_pair(\textcolor{stringliteral}{"Connection"}, std::make\_shared<MyValue>(\textcolor{stringliteral}{"keep-alive"})));}
\DoxyCodeLine{}
\DoxyCodeLine{    MyValue::ValueList list;}
\DoxyCodeLine{    list.push\_back(std::make\_shared<MyValue>(\textcolor{stringliteral}{"text/html"}));}
\DoxyCodeLine{    list.push\_back(std::make\_shared<MyValue>(\textcolor{stringliteral}{"application/xhtml+xml"}));}
\DoxyCodeLine{    list.push\_back(std::make\_shared<MyValue>(\textcolor{stringliteral}{"application/xml"}));}
\DoxyCodeLine{}
\DoxyCodeLine{    header[\textcolor{stringliteral}{"Accept"}] = std::make\_shared<MyValue>(std::move(list));          \textcolor{comment}{//Set the field "Accept" with a list}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&it : header) \{                                               \textcolor{comment}{//Displays fields}}
\DoxyCodeLine{        \textcolor{keyword}{const} \textcolor{keyword}{auto} \&tmp = it.second->getValue();}
\DoxyCodeLine{        \textcolor{keywordflow}{if} (std::holds\_alternative<std::string>(tmp))}
\DoxyCodeLine{            std::cout << it.first << \textcolor{stringliteral}{" : "} << std::get<std::string>(tmp) << std::endl;}
\DoxyCodeLine{        \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::holds\_alternative<MyValue::ValueList>(tmp)) \{}
\DoxyCodeLine{            std::cout << it.first << \textcolor{stringliteral}{" : ["};}
\DoxyCodeLine{            \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&field : std::get<MyValue::ValueList>(tmp)) \{}
\DoxyCodeLine{                std::cout << \textcolor{stringliteral}{" "} << std::get<std::string>(field->getValue());}
\DoxyCodeLine{            \}}
\DoxyCodeLine{            std::cout << \textcolor{stringliteral}{" ]"} << std::endl;}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    \}}
\DoxyCodeLine{}
\DoxyCodeLine{    request.setMethod(\mbox{\hyperlink{classHttp_1_1Request_acb00e56805e8f946c7240b898d823c4da7528035a93ee69cedb1dbddb2f0bfcc8}{Http::Request::MethodType::GET}});                      \textcolor{comment}{//Sets the request's method}}
\DoxyCodeLine{    request.setUri(\textcolor{stringliteral}{"/home/index.html"});                                     \textcolor{comment}{//Sets the request's uri}}
\DoxyCodeLine{    request.setHttpVersion(1, 1);                                           \textcolor{comment}{//Sets the request's versions}}
\DoxyCodeLine{\}}
\end{DoxyCodeInclude}
 